(this["webpackJsonpparrot-control-front"]=this["webpackJsonpparrot-control-front"]||[]).push([[0],{43:function(e,t,n){e.exports=n(90)},48:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(21),i=n.n(r),c=(n(48),n(8)),s=n(9),m=n(11),l=n(10),d=n(17),u=n(2),p=n(18),f=n.n(p),v=n(15),h=(n(82),n(83),n(84),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loading:!0,showInfoBox:!0,isLogoutDoubleCheckOpen:!1,personName:""},a}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"Layout"},this.props.children,o.a.createElement(v.NotificationContainer,null))}}]),n}(o.a.Component)),b=n(16),y=(n(85),n(101)),g=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).startTimer=function(){clearInterval(a.timer),a.setState({seconds:0,active:!0},(function(){a.timer=setInterval(a.countUp,100)}))},a.disableTimer=function(){clearInterval(a.timer),a.setState({seconds:0,active:!1})},a.countUp=function(){a.state.active?a.state.seconds<a.props.duration&&a.setState({seconds:a.state.seconds+.1>=a.props.duration?a.props.duration:a.state.seconds+.1},(function(){a.state.seconds>=a.props.duration&&(a.disableTimer(),"function"===typeof a.props.notifyTimerEnd&&a.props.notifyTimerEnd())})):a.disableTimer()},a.state={seconds:0,active:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentWillReceiveProps",value:function(e){!e.active&&this.state.active?this.disableTimer():e.active&&!this.state.active&&this.startTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return"undefined"!=typeof this.props.duration&&0!=this.props.duration&&this.props.active?o.a.createElement("div",{className:"progress-bar",style:{width:"100%"}},o.a.createElement(y.a,{value:Math.min(100,120*this.state.seconds/this.props.duration),valueBuffer:100,variant:"determinate"})):o.a.createElement("div",{className:""})}}]),n}(o.a.Component),C=n(40),E=n.n(C),O=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).sendParrotCommand=function(e){a.setState({isPerformingCommand:!0,currentCommandDuration:e.perform_time},(function(){f.a.post("http://127.0.0.1:8000/api/v1/parrot/control",{},{params:{parrot_id:a.props.id,cmd_id:e.id}}).then((function(e){})).catch((function(e){a.setState({isPerformingCommand:!1}),v.NotificationManager.error("\u062f\u0633\u062a\u0648\u0631 \u0627\u0631\u0633\u0627\u0644 \u0646\u0634\u062f")}))}))},a.onCommandDurationReach=function(){a.setState({isPerformingCommand:!1})},a.getSortedCategoryList=function(e){var t,n=[],a=Object(b.a)(e);try{var o=function(){var e=t.value;if(n.filter((function(t){return t.identifier==e.category.identifier})).length>0)return"continue";n.push(e.category)};for(a.s();!(t=a.n()).done;)o()}catch(r){a.e(r)}finally{a.f()}return n.sort((function(e,t){return e.display_order-t.display_order}))},a.groupCommandsByCategory=function(e){var t,n={},a=Object(b.a)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.category.identifier in n||(n[o.category.identifier]=[]),n[o.category.identifier].push(o)}}catch(r){a.e(r)}finally{a.f()}return n},a.state={isPerformingCommand:!1,currentCommandDuration:0},a.movementCommands=[],a.voiceCommands=[],a}return Object(s.a)(n,[{key:"renderCommands",value:function(e){var t,n=this,a=this.getSortedCategoryList(e),r=this.groupCommandsByCategory(e),i=[],c=Object(b.a)(a);try{for(c.s();!(t=c.n()).done;){var s,m=r[t.value.identifier],l=[],d=Object(b.a)(m);try{var u=function(){var e=s.value;l.push(o.a.createElement("div",{className:"button-surrounding"},o.a.createElement("button",{className:"btn btn-primary",style:{backgroundColor:"".concat(e.category.button_color),borderColor:"".concat(e.category.button_color)},onClick:function(){n.sendParrotCommand(e)}},e.title)))};for(d.s();!(s=d.n()).done;)u()}catch(p){d.e(p)}finally{d.f()}i.push(o.a.createElement("div",{className:"d-flex flex-row-reverse flex-wrap pt-1 pb-3 category-buttons w-100"},l))}}catch(p){c.e(p)}finally{c.f()}return i}},{key:"componentDidMount",value:function(){var e=E()(".p_".concat(this.props.id)),t=e.find(".command-section.movement"),n=e.find(".command-section.voice"),a=Math.max(Math.min(70,100*this.props.movementCommands.length/(this.props.movementCommands.length+this.props.voiceCommands.length)),30),o=100-a;t.css("height","".concat(a,"%")),n.css("height","".concat(o,"%"))}},{key:"render",value:function(){return o.a.createElement("div",{className:"ParrotControlBox p_".concat(this.props.id," w-100 d-flex flex-column visible\n                                ").concat(this.state.isPerformingCommand?" disabled":"")},o.a.createElement(g,{active:this.state.isPerformingCommand,duration:this.state.currentCommandDuration,notifyTimerEnd:this.onCommandDurationReach}),o.a.createElement("div",{className:"command-section pb-3 px-0 w-100 align-items-center movement order-1"},o.a.createElement("div",{className:"card-header w-100 px-md-4 px-2 mx-0 px-0"},"\u062f\u0633\u062a\u0648\u0631\u0627\u062a \u062d\u0631\u06a9\u062a\u06cc"),o.a.createElement("div",{className:"command-box py-4 px-md-4 px-2"},this.renderCommands(this.props.movementCommands))),o.a.createElement("div",{className:"command-section pb-3 px-0 w-100  flex-column align-items-center voice order-0"},o.a.createElement("div",{className:"card-header w-100 px-md-4 px-2 mx-0 px-0"},"\u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0635\u0648\u062a\u06cc"),o.a.createElement("div",{className:"command-box py-4 px-md-4 px-2"},this.renderCommands(this.props.voiceCommands))))}}]),n}(o.a.Component),j=Object(u.e)(O),x=(n(89),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"parrot-area p-md-5 p-3 flex-grow-1 w-100 h-100 ".concat(this.props.className)},this.props.children)}}]),n}(o.a.Component)),w=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).getCommands=function(){f.a.get("http://127.0.0.1:8000/api/v1/parrot/control",{}).then((function(e){a.commands=e.data,a.setState({loaded:!0})})).catch((function(e){v.NotificationManager.error("\u062e\u0637 \u062f\u0631 \u0627\u0631\u062a\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631")}))},a.state={loaded:!1},a.commands={parrot_0:{},parrot_1:{}},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getCommands()}},{key:"render",value:function(){return o.a.createElement(h,null,o.a.createElement("div",{id:"ParrotControl",className:"d-flex flex-row"},0==this.state.loaded?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{className:"red-parrot"},o.a.createElement(j,{id:"0",movementCommands:this.commands.parrot_0.movement,voiceCommands:this.commands.parrot_0.voice})),o.a.createElement(x,{className:"blue-parrot"},o.a.createElement(j,{id:"1",movementCommands:this.commands.parrot_1.movement,voiceCommands:this.commands.parrot_1.voice})))))}}]),n}(o.a.Component),N=Object(u.e)(w),k=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{path:"/",exact:!0,render:function(){return o.a.createElement(N,null)}}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.1d8c659f.chunk.js.map