<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Hardware interface for Dynamixels and ROS control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Hardware interface for Dynamixels and ROS control </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://wiki.ros.org/ros_control">ROS control</a> is a framework to design software control loops in <a href="http://www.ros.org/">ROS</a> (Robot Operating System) where the controller code is decoupled from the actual hardware.</p>
<p>This piece of software provides a hardware interface for ROS control. Its aim is to allow generic software controllers to control a set of Dynamixel actuators.</p>
<p>We are using it for our robots and developing it for this purpose. Version 0.1.0 is clearly no final code but it works for the regular needs.</p>
<p>Documentation : <a href="http://www.resibots.eu/dynamixel_control_hw/">http://www.resibots.eu/dynamixel_control_hw/</a> </p>
<h1><a class="anchor" id="autotoc_md2824"></a>
Features</h1>
<ul>
<li>simple, ROS-style control interface for your dynamixel-based robot</li>
<li>not specific to a given number or set of actuators</li>
<li>position and velocity control</li>
<li>works with both version of Dynamixel protocol (1 and 2)</li>
<li>uses radians uniformly over all Dynamixel models (no need to worry about ticks-to-angle conversion)</li>
<li>you can set an offset for each actuator's position</li>
<li>set names for your dynamixels in a configuration file</li>
</ul>
<h1><a class="anchor" id="autotoc_md2825"></a>
Limitations</h1>
<p>We are currently working on the following features:</p>
<ul>
<li>joint limits not implemented yet</li>
<li>add support for the more exotic control modes (including current and multi-turn)</li>
<li>it would be great to offer a service to reset one actuator after an overload error</li>
</ul>
<h1><a class="anchor" id="autotoc_md2826"></a>
Installation and usage</h1>
<p><code>dynamixel_control_hw</code> depends on the <a href="http://github.com/resibots/libdynamixel">libdynamixel</a> library. Please install it, it's light and quick.</p>
<p>Then, you'll need to store the installation path of libdynamixel in the <code>LIBDYNAMIXEL</code> environment variable.</p>
<p>Install the ros package ros_control. In apt-get, it is called <code>ros-YourDistro-ros-control</code> (where <em>YourDistro</em> must be changed by the ROS distribution's name, like indigo or jade).</p>
<p>Clone the <code>dynamixel_control_hw</code> repository in your catkin workspace's source directory and run a <code>catkin_make</code>.</p>
<h2><a class="anchor" id="autotoc_md2827"></a>
Parameters</h2>
<p>For sample configuration files, see the ones in <code>config/</code>. Here are the accepted parameters.</p>
<ul>
<li><b>serial_interface</b>: path to the USB to serial interface for example "/dev/ttyUSB0"</li>
<li><b>baudrate</b>: baud-rate for the serial communication with actuators (in bauds)</li>
<li><b>loop_frequency</b>: frequency at which the control loop will run (in Hz)</li>
<li><b>cycle_time_error_threshold</b>: how much delay is tolerated on the control loop (in s)</li>
<li><b>read_timeout</b>: timeout on the reception of replies from the servos (in s)</li>
<li><b>read_timeout</b>: (for the scan only) timeout on the reception of replies from the servos (in s)</li>
<li><b>servos</b>: object which keys are the name of the joints and which values contain:<ul>
<li><b>id</b> (required): actuator's ID to its name (the one used in the controller list and in URDF)</li>
<li><b>offset</b>: correction to be applied to the angle of the joint (in rad)</li>
<li><b>command_interface</b>: the command mode (velocity or position)</li>
<li><b>max_speed</b>: maximal allowed velocity (rad/s), <b>for now, works only for joints in position control</b></li>
</ul>
</li>
<li><b>default_command_interface</b>: if no <b>command_interface</b> is defined for a joint, this value is used instead</li>
</ul>
<h2><a class="anchor" id="autotoc_md2828"></a>
Testing the hardware interface</h2>
<p>If you want to use the sample launch files or to use one of the default controllers, please install with apt-get:</p>
<ul>
<li><code>ros-YourDistro-ros-controllers</code> and</li>
<li><code>ros-YourDistro-joint-state-publisher</code>.</li>
</ul>
<p>Have a look at the <code>launch/sample.launch</code> file. It will by default launch two feed-forward only controllers (one position and one velocity) and a virtual controller that publishes the states of the two actuators.</p>
<p><em>Before starting</em> it, check <code>config/sample.yaml</code> for the <code>id</code> parameters, the <code>serial_interface</code> and <code>baudrate</code> settings. Once you are sure that it's correct, you can <code>roslaunch dynamixel_control_hw sample.launch</code>. By looking at the available topics, you should find two, for the commands the joints, and one for the joint state.</p>
<h1><a class="anchor" id="autotoc_md2829"></a>
Troubleshooting read time</h1>
<p>If the reading time seems too long, check the value of the USB latency timer. On ubuntu this value is retrieved with this command <code>cat /sys/bus/usb-serial/devices/ttyUSB0/latency_timer</code>. It is the time, in milliseconds, for which the device driver buffers data before making it available.</p>
<p>You can change this timer with the command <code>echo 4 | sudo tee /sys/bus/usb-serial/devices/ttyUSB0/latency_timer</code> which sets it to 4 ms for the device <code>/dev/ttyUSB0</code>.</p>
<h1><a class="anchor" id="autotoc_md2830"></a>
Alternative software</h1>
<p>If you know of an other software offering similar functionalities to this one, feel free to open an issue so that we can add it here.</p>
<h1><a class="anchor" id="autotoc_md2831"></a>
Support and contact</h1>
<p>This software is developed as part of the ResiBots project. We do our best to keep it free of bug and to implement relevant features. Should you face an issue or have a suggestion, please open an issue.</p>
<h1><a class="anchor" id="autotoc_md2832"></a>
Projects using this software</h1>
<ul>
<li><a href="http://www.resibots.eu">ResiBots</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2833"></a>
License</h1>
<p>Unless stated otherwise, the license for this repository is CeCILL-C (see LICENSE and LICENSE.fr). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
